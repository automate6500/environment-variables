name: Environment Variables
env:
  WORKSPACE_ENVIRONMENT_VARIABLE: workspace
on: [push]
jobs:
  job1:
    env:
      JOB_ENVIRONMENT_VARIABLE: jobs
    runs-on: ubuntu-latest
    steps:
      - name: Print custom environment variables
        env:
          STEP_ENVIRONMENT_VARIABLE: step
        run: |
          echo "Accessing environment variables in run command"
          echo \$WORKSPACE_ENVIRONMENT_VARIABLE=$WORKSPACE_ENVIRONMENT_VARIABLE
          echo \$JOB_ENVIRONMENT_VARIABLE=$JOB_ENVIRONMENT_VARIABLE
          echo \$STEP_ENVIRONMENT_VARIABLE=$STEP_ENVIRONMENT_VARIABLE
          echo "------------------------------------------------------"
          echo "Accessing environment variables using env context"
          echo env.WORKSPACE_ENVIRONMENT_VARIABLE=${{ env.WORKSPACE_ENVIRONMENT_VARIABLE }}
          echo env.JOB_ENVIRONMENT_VARIABLE=${{ env.JOB_ENVIRONMENT_VARIABLE }}
          echo env.STEP_ENVIRONMENT_VARIABLE=${{ env.STEP_ENVIRONMENT_VARIABLE }} # NOT DEFINED!
  job2:
    env:
      JOB_ENVIRONMENT_VARIABLE: jobs
    runs-on: windows-latest
    steps:
      - name: Print custom environment variables
        env:
          STEP_ENVIRONMENT_VARIABLE: step
        run: |
          echo "Accessing environment variables in run command"
          echo \$Env:WORKSPACE_ENVIRONMENT_VARIABLE=$Env:WORKSPACE_ENVIRONMENT_VARIABLE
          echo \$Env:JOB_ENVIRONMENT_VARIABLE=$Env:JOB_ENVIRONMENT_VARIABLE
          echo \$Env:STEP_ENVIRONMENT_VARIABLE=$Env:STEP_ENVIRONMENT_VARIABLE
          echo "------------------------------------------------------"
          echo "Accessing environment variables using env context"
          echo env.WORKSPACE_ENVIRONMENT_VARIABLE=${{ env.WORKSPACE_ENVIRONMENT_VARIABLE }}
          echo env.JOB_ENVIRONMENT_VARIABLE=${{ env.JOB_ENVIRONMENT_VARIABLE }}
          echo env.STEP_ENVIRONMENT_VARIABLE=${{ env.STEP_ENVIRONMENT_VARIABLE }} # NOT DEFINED!
